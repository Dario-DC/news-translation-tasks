---
title: 什么是组件库？何时构建自己的组件库，何时使用别人的组件库
date: 2024-08-19T09:02:46.869Z
author: Andrico Karoulla
authorURL: https://www.freecodecamp.org/news/author/andrico1234/
originalURL: https://www.freecodecamp.org/news/what-is-a-component-library-when-to-build-your-own/
posteditor: ""
proofreader: ""
---

如果你在过去五年里构建了一个前端项目，那么你很可能已经编写了一些组件，甚至可能使用了一个组件库。

<!-- more -->

组件和库已经成为了网络开发领域的重要组成部分，已经持续了几十年，它们依然与以往一样有用和重要。

有时你应该构建自己的组件库，有时则更适合使用第三方选项。读完这篇文章后，你将了解每种方式的优缺点，并能够为下一个项目做出正确的决策。

### 目录：

-   [一个类比：如果预录的音乐专辑不存在][1]
    
-   [我写这篇指南的原因][2]
    
-   [什么是组件？][3]
    
-   [什么是组件库？][4]
    
-   [组件库与设计系统的区别是什么][5]
    
    -   [设计系统][6]
        
    -   [组件库][7]
        
-   [组件库的简史][8]
    
-   [什么是好的组件库？][9]
    
-   [使用组件库的好处有哪些？][10]
    
-   [使用第三方组件库的缺点有哪些？][11]
    
-   [组件库可能采取的不同形式][12]
    
    -   [工具类库/CSS样式指南][13]
        
    -   [现成的组件库][14]
        
    -   [无样式组件][15]
        
    -   [可复制粘贴的组件库][16]
        
-   [为什么没有一个能统治所有的组件库？][17]
    
-   [你应该构建自己的组件库吗？][18]
    
-   [何时（以及为什么）构建自己的组件库是有用的][19]
    

## 一个类比：如果预录的音乐专辑不存在

我是一个巨大的音乐爱好者。我最喜欢的消遣之一就是放上一张唱片，从头到尾听完它。音乐专辑的概念很简单：它是艺术家录制的曲目集，被认为是完整和连贯的歌曲集。

但如果录制的音乐不存在呢？你只能在艺术家现场为你演奏时，才能听到一张专辑。你需要去找乐队，让他们设置好设备，并从头到尾地演奏这张专辑。他们每次都需要以相同的方式演奏，确保每个人都有完全相同的体验。

问题会开始显现。这并不是确保任何对乐队音乐感兴趣的人都可以听到它的有效方式。如果泰勒·斯威夫特需要亲自为每个在Spotify上听她歌曲《Fortnight》的人演奏这首歌，她将需要3179年。而这还不包括任何[飞机旅行][20]。艺术家们会感到厌倦，甚至变得粗心，导致听众的体验变差。

那么这与网页开发有什么关系呢？每次你构建一个UI控制时，你必须确保它是功能正常的，健壮的，并且可访问。如果你每次都重复编写相同的UI，你将会感到厌烦，错误会悄然溜进来，导致最终用户体验不好。

## 我写这篇指南的原因

我做了将近10年的网页开发，编写了数百个组件，通常是多次使用相同的UI模式。我使用过几十个组件库，并构建了管理仪表盘、组件库、移动应用、博客、Figma插件、VSCode扩展等。

在这篇文章中，我将讨论组件和库在网页开发中的作用，以及开发者是否应该编写自己的组件。

我也是[Component Odyssey][21]课程的创作者，该课程将教你构建一个在任何前端框架中都能工作的组件库。

## 什么是组件？

在构建用户界面时，我们不会每次都从头开始编写所有的HTML标记。我们使用组件来编写UI——可重复使用的构建块，它们封装常见的UI模式。编写一个组件可以让你在一个项目中多次使用它，甚至在独立项目中使用。

这里我写了一个计数器组件。我写了一次，并在页面的多个地方使用它。

```
<body>
  <div class="wrapper">
    <counter-button></counter-button>
    <counter-button></counter-button>
    <counter-button></counter-button>
  </div>

  <script type="module">
    import { LitElement, html } from 'lit';

    class CounterButton extends LitElement {
      constructor() {
        super();
        this.count = 0;
      }

      static properties = {
        count: { type: Number }
      };

      _increment() {
        this.count++;
      }

      render() {
        return html`
          <button @click=${this._increment}>Count: ${this.count}</button>
        `;
      }
    }

    customElements.define('counter-button', CounterButton);
  </script>
</body>
```

我们这些教程创作者喜欢演示计数器，好像它们要过时了一样——但一个真实世界的应用将包含数十种不同的UI模式，这些模式都写成了组件。

在本文中，我将把提供某些UI模式样式的CSS规则归入组件的范畴。根据你问的是谁，定义可能会变得模糊。

## 什么是组件库？

并非所有组件都是独立的。将许多组件分组在一个包中，称为组件库，是有道理的。

如果你希望你的网站有特定的外观或感觉，你可以使用一个_组件库_。有一些组件库：

-   提供遵循设计规范的组件。
    
-   为特定UI模式提供多种解决方案。
    
-   与特定工具链配合使用
    

但它们有不同的形态和大小。我在定义组件库时使用的定义如下：

_组件库是一组可重复使用的组件，它们在功能或外观方面是一致的（或两者兼具）。一个优秀的组件库将帮助开发者高效地实现他们的UI需求，同时为最终用户提供卓越的体验。_

## 组件库与设计系统的区别是什么？

我将在本文后面讨论指南和设计系统，所以我先花一点时间来澄清它们的区别。有时很难看出哪里是分界线，哪里是起点，或者哪里彼此包含。

### **设计系统**

我认为设计系统是一种规范，规定了事物的外观、感觉和行为。设计系统可以涵盖一个产品、一个品牌或一个公司，以确保在不同体验中的一致性。一个全面的设计系统将规定一切，从字体系列、字体大小、间距大小，到UI模式和文本指南。

一些最著名的设计系统包括：

-   [Material Design][22] (Google)
    
-   [Base Design][23] (Uber)
    
-   [Lightning Design System][24] (Salesforce)
    

虽然许多设计系统是公司特有的，但有像Material Design这样的设计系统，全球的团队都使用它们来快速构建熟悉的产品。你可能使用过一些运用了Material Design原则的产品，但它们[绝不是没有基本的可用性问题][25]。

### **组件库**

至于组件库，它们可能是也可能不是设计系统的代码实现。如果你为一个有设计系统的公司工作，那么相应的组件库（如果存在）很可能与其紧密集成。

例如，Google的[Material Web][26]是Material Design的网页组件实现。[Base Web][27]和[Lightning Web Components][28]也是开源的。

## 组件库的简史

UI组件（或小部件）的概念已经存在很长时间了。如果你想看到一个充满复古用户界面的博物馆，不妨拿些爆米花，观看这段[2小时以上的“所有小部件”视频（1974-1990）][29]。

从2000年代初，我们开始看到一些组件库帮助开发者构建网页。

当时的网页浏览器环境与现在完全不同。Internet Explorer的版本完全偏离了规范，这在IE占据巨大市场份额时特别成问题。[Internet Explorer 6以开发困难著称][31]。这主要是因为其不正确的[盒子模型实现][32]，以及缺乏CSS2支持。

> 💡 今日学到（TIL），Internet Explorer支持一种“[怪癖模式（quirks mode）][33]”，允许开发者编写不标准的HTML和CSS，以适应不支持标准的老浏览器。

幸运的是，当我开始认真进行网页开发时，许多这些问题已经解决了。这时，仍然有一些库，帮助开发者编写复杂的、跨浏览器支持的接口。

[jQuery UI][34]是我用过的第一个组件库，它支持手风琴和其他小部件。但浏览器是在不断进化，我们现在有一个原生的方法在所有2020年的浏览器中使用`details`和`summary`元素来实现这个手风琴模式。

使用这些元素，你可以在创建交互手风琴时无需JavaScript。

对比2009年，在这些元素尚未在任何浏览器中实现之前。这需要相当多的JavaScript才能工作。如果你想看15年前网页开发者是如何实现手风琴的，可以看看[jQuery UI v1.7源代码][35]，并用CTRL+F搜索“accordion”。

在接下来的几十年中，网页的能力在增长。更强大的设备意味着更强大的浏览器。更强大的浏览器意味着网页应用变得更有雄心。

开发者通过创建帮助我们构建这些应用的工具来回应，让我们能够通过_构建块_创建UI——即组件模型。我们看到了这些基于组件的框架的兴盛。我指的是Angular、React和Vue。每一个都有其丰富的组件库生态系统。

可以合理地认为，前端领域已经过度校正，现在充斥着超出大多数人需求的强大工具……但我们不必深入讨论这个。

## 什么是好的组件库？

构建组件库的挑战在于它们不是一次性完成的交易。许多最流行的库已经存在多年，并进行了大量的研究、使用反馈和贡献才达到了今天的状态。

我发现，一个好的组件库通常具备以下特点：

-   它了解其目标开发者的问题，并很好地解决这些问题
    
-   它有出色的文档
    
-   它确保最终用户有良好的体验
    
-   它健壮并适合适当的输入模式和设备
    

另一方面，如果一个组件库不考虑可访问性、API不一致、几乎没有项目管理或没有清晰一致的文档，那它可能不是一个好的组件库。

## 使用组件库的好处有哪些？

我们知道好的组件库是什么样的——那么让我们看看一个组件库如何使你的生活以及用户的生活更美好。

### 组件库为你节省时间

如果你在一个有紧急截止日期的项目中，效率很重要。但效率不应该以牺牲打造健壮的网页体验为代价。使用组件库可以让你花更少的时间重新发明轮子，更多的时间专注于细节。

### 组件库让你和你的用户更开心

我们不喜欢重复性工作。我们喜欢技术挑战，而一遍又一遍地编写相同组件并不是一个有趣的挑战。我们已经讨论了当我们感到厌倦并犯错误时会发生什么。

如果你想从头实现一个对话组件，你需要：

-   正确处理焦点捕捉
    
-   使页面的其余部分不可操作
    
-   正确定位对话框
    
-   确保它与辅助技术兼容
    

记住并实现上述内容需要工作，但实现错误的后果可能会使你的界面完全不可用。如果你[处理焦点不正确][36]，这就是情况。

通过使用一个以最终用户为中心构建的组件库，你可以防止引入破坏性体验的风险，同时花更少的时间重建相同的组件。

### 组件库带来一致的体验

如果你为一个有多个不同网页应用程序的公司工作，这些应用程序通常会遵循一套指南。这些指南可能规定了使用的调色板、字体大小，或UI元素的外观和行为。

但如果你重新编写组件，你的应用程序偏离样式指南的可能性就会增加。通过有一个组件库，你可以更轻松地审核你的组件UI与品牌指南的一致性，让它们无论在哪里使用都看起来不错。

Uber有几个不同的应用程序，它们共享相同的用户界面元素。我几乎可以肯定它们使用相同的组件库来构建这些应用程序。这样，每个新应用程序几乎可以保证遵循品牌指南。

![不同的Uber应用程序并排展示，它们在外观上是多么相似](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4lh0etdq7yhk4zhmiac8.png)

## 使用第三方组件库的缺点有哪些？

上面提到的优点无论你是使用自己的组件库还是第三方的都是适用的。如果你或你的团队决定不想构建库，而是依赖第三方库，那么值得考虑以下几点。

### 供应商锁定

选择一个组件库，意味着选择一个会极大影响你如何编写前端代码以及你的界面外观和行为的伙伴。

前者对你有很大影响，后者对你的终端用户有很大影响。使用组件库就是锁定自己到该组件库的标准。

该库可能会在主要版本中引入大量破坏性更改，可能需要专门的开发时间和大量测试，以确保没有引入严重的回归问题。

几年前，我使用React Admin为一个内部部门构建了一个复杂的管理仪表盘。该库提供了一套专门用于获取和显示复杂数据的组件。

因为我们当时的应用程序严重依赖React Admin，在主要版本之间进行升级是具有挑战性的，尤其是许多React Admin使用的内部工具被替换为其他工具。更改面非常大，我们花了不少时间升级并标记我们发现的问题。

我不认为构建我们自己的解决方案会在长期内为我们节省时间，但这种供应商锁定值得考虑，尤其是在全面依赖某个工具之前。

### 代码臃肿

令人震惊的是，拥有很多组件的库通常使用很多代码。这是你在安装依赖项时下载的代码，也是你传递给终端用户的代码。

现代工具使得像Tree-Shaking这样的包优化变得更容易，去除未使用的代码，但没有保证你去除了用户不需要的所有代码。

除非你深入了解正在使用的库，否则你可能不知道它们正在导入的所有单独包裹。结果可能是上百个不必要的依赖项。e18e社区的成员一直在努力揭露这个问题[并解决它][38]。

这些问题中的许多也可以说是关于推出自己的组件库。最大的区别在于你对自己的组件库有管理权。你可以定义它如何解决你的具体问题，并且你可以控制改进它的不足之处。

## 组件库可能采取的不同形式

初始提案中的万维网是一个改进CERN研究人员间通信的工具。该提案概述了如何通过超文本共享和链接文档。

这是网络的基本基石，我们仍然使用简单的`<a>`标签来链接网络上的其他HTML文档。

但在过去的几十年中，网络的范围扩大了，我们用于浏览网络的浏览器也变成了庞然大物。今天的浏览器可以实现[强大的创造性表达形式][40]，以及[运行本机类软件][41]。

有数百种不同的解决方案，一些是通用的，其他是超小众的，但为你的下一个项目找到合适的工具需要一个复杂的决策过程，可能如下所示：

![组件库的不同类型以及何时使用它们。图表的上下文在下文中展开](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bn80olo3e0h8v4h4v311.png)

这不是所有用例或组件库类型的综合列表，但它说明了组件库在以下方面的不同：

-   涉及的技术。
    
-   它们提供的抽象级别。
    
-   它们解决的问题。
    

让我们看一下最常见的一些组件库类型。

💡 一个快速提示：如果你对构建自己的网页组件库感兴趣，可以考虑查看我的课程[Component Odyssey][42]。你将学习如何构建和发布一个在任何前端框架中都能工作的组件库。

### 工具类库 / CSS样式指南

对我来说，[Bootstrap][43]是首先想到的。这一天前，如果你想快速给你的网站进行包装，你会将bootstrap CSS文件的CDN链接放在页面中，立即获得Bootstrap的外观。在2010年代中期到处都是。

![一个大约2013年的Bootstrap网站演示示例](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7zl86ek2nhsoxc043pnt.png)

这些工具的技术范围从

-   一个单独的CSS文件（[Pico][44]）

到

-   根据你的配置生成CSS类的工具链（[Tailwind][45]）

数十种其他工具，如[Open Props][46]，位于中间的某个地方。

### 现成的组件库

如果你正在构建一个交互式网页应用程序，你可能只想抓取一套看起来不错且功能齐全的组件。有很多这样的现成组件库，为你提供你所需的一切，甚至更多。

无论你正在使用哪个框架来编

